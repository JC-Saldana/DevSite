<div class="project project-details scale-up-center">
	<h2 class="project-title"><strong>{{project.title}}</strong></h2>
	<p><sub>by {{project.user.name}}</sub></p>
	<img src="{{project.images}}" alt="img" class="project-pic project-details-pic">
	<sub class="project-details-sub">- Description -</sub>
	<p>{{{project.description}}}</p>
	<sub class="project-details-sub">- Skills used -</sub>
	<ul class="list-horizontal">
		{{#each project.skills as |skill|}}
		<li>
			<small>{{skill}}</small>
		</li>
		{{/each}}
	</ul>
	<i data-id="{{project.id}}" class="like-action fa-solid fa-heart {{#if liked}}icon-liked{{/if}}">
	</i>
</div>

<h3 class="mt-4">Comment! ðŸ¤™</h3>
{{!-- Comment --}}
<div class="rounded p-3" style="background-color: rgb(250, 250, 250);">
	<form action="/comment/{{project._id}}" method="POST">
		<div class="d-flex flex-row mt-4">
			<img class="img-fluid rounded-circle m-2" src="{{currentUser.avatar}}" width="50">
			<input name="comment" type="text" class="form-control" placeholder="Add comment">
		</div>
		<div class="d-flex justify-content-end mt-2">
			<button class="btn btn-secondary" type="submit">Comment</button>
		</div>
	</form>
</div>

{{#if project.comments}}
<hr>

<div class="row d-flex justify-content-center">
	<h3 class="fs-5">Comments: {{project.comments.length}}</h3>
	<div>
		{{#each project.comments as |comment|}}
		<div class="card mb-4">
			<div class="card-body position-relative">
				<form class="d-flex justify-content-center align-items-center position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary" action="/comment/{{comment.id}}/delete" method="POST" style="height: 30px; width: 30px; top:115px;">
					<input type="text" name="id" class="d-none" value="{{../project.id}}">
					<button class="btn" style="font-size: 1rem; color: rgb(255, 255, 255);" type="submit"><i class="fa fa-close"></i></button>
				</form>

				<p>{{comment.comment}}</p>
				<div class="d-flex flex-row align-items-center mb-2">
                	<img class="rounded-circle" src="{{user.avatar}}" alt="avatar" width="25" height="25"/>
                <p class="small mb-0 ms-2">{{comment.user.name}} at {{comment.createdAt}}</p>
				
              </div>
			</div>
		</div>
		{{/each}}
	</div>
</div>
{{else}}
<div class="mt-3 border p-4">
	<h3 class="fs-5 text-center ">No comments yet! be the first!</h3>
</div>
{{/if}}


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/js/axios.js"></script>